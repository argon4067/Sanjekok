{% extends "base.html" %}
{% load static %}

{% block title %}산재 뉴스{% endblock %}

{% block script1 %}
<!-- News 전용 CSS -->
<link rel="stylesheet" href="{% static 'CSS/news/news_list.css' %}">
{% endblock %}

{% block contents %}
<div class="container py-5">

    <div class="news-header text-center mb-5">
        <p class="subtitle">산업재해 예방 정보</p>
        <h2 class="fw-bold" style="color:#23333d;">산재 뉴스</h2>
    </div>

    {% for n in list %}
    <div class="news-card">

        <!-- 썸네일 -->
        <div class="news-img">
            {% if n.n_image_url %}
            <a href="{{ n.n_link }}" target="_blank">
                <img src="{{ n.n_image_url }}" alt="썸네일">
            </a>
            {% else %}
            <div class="no-image">이미지 없음</div>
            {% endif %}
        </div>

        <!-- 뉴스 내용 -->
        <div class="news-info">
            <div class="news-title">
                <a href="{{ n.n_link }}" target="_blank">{{ n.n_title }}</a>
            </div>

            <div class="news-content">
                <a href="{{ n.n_link }}" target="_blank">{{ n.n_contents }}</a>
            </div>

            <div class="news-meta">
                <span>작성자: {{ n.n_writer }}</span> |
                <span>작성일: {{ n.n_created_at|slice:":11" }}</span>
            </div>
        </div>

    </div>
    {% endfor %}

    <!-- 페이지네이션 -->
    <div class="container mt-5">
        <ul class="pagination justify-content-center">
            {# 처음으로 << #}
            {% if list.number > 1 %}
            <li class="page-item">
                <a class="page-link" href="?page=1">처음 <<</a>
            </li>
            {% endif %}

            {# 이전 < #}
            {% if start_page > 1 %}
            <li class="page-item">
                <a class="page-link" href="?page={{ start_page|add:-1 }}">이전 <</a>
            </li>
            {% endif %}

            {# 페이지 번호들 #}
            {% for i in page_range %}
                {% if list.number == i %}
                <li class="page-item active"><span class="page-link">{{ i }}</span></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}

            {# 다음 > #}
            {% if list.paginator.num_pages > end_page %}
            <li class="page-item">
                <a class="page-link" href="?page={{ end_page|add:1 }}">다음 ></a>
            </li>
            {% endif %}

            {# 맨끝 >> #}
            {% if list.number < list.paginator.num_pages %}
            <li class="page-item">
                <a class="page-link" href="?page={{ list.paginator.num_pages }}">맨끝 >></a>
            </li>
            {% endif %}
        </ul>
    </div>

</div>
{% endblock %}

{% block script2 %}
<!-- News 전용 JS (필요 시 유지) -->
<script src="{% static 'js/news/news_list.js' %}"></script>
{% endblock %}
